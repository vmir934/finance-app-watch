вот код обнови
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finance Watch — Live</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg: #f7f8fb;
            --card: #ffffff;
            --muted: #6b7280;
            --accent: #007aff;
            --positive: #16a34a;
            --negative: #ef4444;
            --glass: rgba(255, 255, 255, 0.6);
            --radius: 14px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html, body {
            height: 100%;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg);
            color: #0b1220;
            line-height: 1.5;
        }

        /* Header */
        header {
            position: fixed;
            left: 0;
            right: 0;
            top: 0;
            height: 84px;
            padding: 18px 20px;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.5));
            backdrop-filter: blur(8px);
            border-bottom: 1px solid rgba(15, 23, 42, 0.04);
            display: flex;
            align-items: center;
            z-index: 40;
        }

        .header-content {
            display: flex;
            align-items: center;
            gap: 14px;
            width: 100%;
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .logo {
            width: 52px;
            height: 52px;
            border-radius: 12px;
            background: linear-gradient(135deg, #007aff, #4cc0ff);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            box-shadow: 0 8px 24px rgba(2, 6, 23, 0.08);
        }

        .brand {
            flex: 1;
        }

        h1 {
            font-size: 20px;
            font-weight: 700;
            margin: 0;
        }

        .subtitle {
            font-size: 13px;
            color: var(--muted);
            margin-top: 2px;
        }

        .last-updated {
            text-align: right;
            font-size: 13px;
            color: var(--muted);
        }

        /* Main Content */
        .container {
            max-width: 1100px;
            margin: 110px auto 60px;
            padding: 0 20px;
        }

        .section-title {
            font-size: 16px;
            color: var(--muted);
            margin-bottom: 12px;
            display: flex;
            align-items: flex-end;
            justify-content: space-between;
        }

        .refresh-info {
            font-size: 13px;
            color: var(--muted);
        }

        /* Grid & Cards */
        .grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 18px;
            margin-bottom: 26px;
        }

        @media (max-width: 1000px) {
            .grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 600px) {
            .grid {
                grid-template-columns: 1fr;
            }
            .container {
                margin: 90px 14px 40px;
            }
        }

        .card {
            background: var(--card);
            border-radius: var(--radius);
            padding: 16px;
            border: 1px solid rgba(2, 6, 23, 0.04);
            box-shadow: 0 6px 18px rgba(12, 20, 34, 0.04);
            transition: transform 0.14s, box-shadow 0.14s;
        }

        .card:hover {
            transform: translateY(-6px);
            box-shadow: 0 14px 36px rgba(12, 20, 34, 0.06);
        }

        .card:focus {
            outline: 3px solid rgba(0, 122, 255, 0.12);
        }

        /* Card Content */
        .card-header {
            display: flex;
            gap: 12px;
            align-items: center;
            margin-bottom: 12px;
        }

        .icon {
            width: 44px;
            height: 44px;
            border-radius: 10px;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 18px;
        }

        .btc { background: linear-gradient(135deg, #f7931a, #ffb86b); }
        .eth { background: linear-gradient(135deg, #627eea, #9aa8ff); }
        .btc-d { background: #ff6b35; }
        .eth-btc { background: linear-gradient(135deg, #f7931a, #627eea); }
        .usd { background: linear-gradient(135deg, #16a34a, #7ee787); }
        .eur { background: linear-gradient(135deg, #007aff, #5fb4ff); }
        .cny { background: linear-gradient(135deg, #ff3b30, #ff6961); }
        .moex { background: linear-gradient(135deg, #9333ea, #c292ff); }
        .sp500 { background: linear-gradient(135deg, #5856d6, #8b8df2); }

        .card-title {
            font-weight: 700;
            font-size: 15px;
        }

        .card-subtitle {
            font-size: 12px;
            color: var(--muted);
        }

        .price {
            font-size: 22px;
            font-weight: 800;
            margin: 10px 0 8px;
        }

        .change {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 8px;
            border-radius: 999px;
            font-size: 13px;
            font-weight: 600;
        }

        .positive {
            color: var(--positive);
            background: rgba(22, 163, 74, 0.08);
        }

        .negative {
            color: var(--negative);
            background: rgba(239, 68, 68, 0.06);
        }

        .change-icon {
            font-size: 12px;
        }

        .card-info {
            font-size: 13px;
            color: var(--muted);
            margin-top: 8px;
            line-height: 1.4;
        }

        /* Footer */
        footer {
            max-width: 1100px;
            margin: 10px auto 30px;
            padding: 0 20px;
            color: var(--muted);
            font-size: 13px;
            text-align: center;
        }

        /* Loading states */
        .loading {
            opacity: 0.7;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">FW</div>
            <div class="brand">
                <h1>Finance Watch</h1>
                <div class="subtitle">Актуальные рыночные данные в реальном времени</div>
            </div>
            <div class="last-updated" id="last-updated">—</div>
        </div>
    </header>

    <main class="container" role="main">
        <!-- Криптовалюты -->
        <section aria-labelledby="crypto-title">
            <div class="section-title">
                <h2 id="crypto-title">Криптовалюты</h2>
                <div class="refresh-info">Обновляется каждые <strong>30 сек</strong></div>
            </div>

            <div class="grid">
                <!-- Bitcoin -->
                <article class="card" aria-labelledby="btc-title" tabindex="0">
                    <div class="card-header">
                        <div class="icon btc">
                            <i class="fab fa-bitcoin"></i>
                        </div>
                        <div>
                            <div class="card-title" id="btc-title">Bitcoin</div>
                            <div class="card-subtitle">BTC / USD</div>
                        </div>
                    </div>
                    <div class="price" id="btc-price">$—</div>
                    <div class="change" id="btc-change">
                        <i class="fas fa-arrow-up change-icon"></i>
                        +—%
                    </div>
                    <div class="card-info" id="btc-info">Market cap: — • Volume: —</div>
                </article>

                <!-- Ethereum -->
                <article class="card" aria-labelledby="eth-title" tabindex="0">
                    <div class="card-header">
                        <div class="icon eth">
                            <i class="fab fa-ethereum"></i>
                        </div>
                        <div>
                            <div class="card-title" id="eth-title">Ethereum</div>
                            <div class="card-subtitle">ETH / USD</div>
                        </div>
                    </div>
                    <div class="price" id="eth-price">$—</div>
                    <div class="change" id="eth-change">
                        <i class="fas fa-arrow-up change-icon"></i>
                        +—%
                    </div>
                    <div class="card-info" id="eth-info">Market cap: — • Volume: —</div>
                </article>

                <!-- BTC Dominance -->
                <article class="card" aria-labelledby="btc-d-title" tabindex="0">
                    <div class="card-header">
                        <div class="icon btc-d">D</div>
                        <div>
                            <div class="card-title" id="btc-d-title">BTC Dominance</div>
                            <div class="card-subtitle">Доля рынка</div>
                        </div>
                    </div>
                    <div class="price" id="btc-d-price">—%</div>
                    <div class="change positive" id="btc-d-change">
                        <i class="fas fa-arrow-up change-icon"></i>
                        +—%
                    </div>
                    <div class="card-info">Процент от общей капитализации рынка</div>
                </article>

                <!-- ETH/BTC -->
                <article class="card" aria-labelledby="eth-btc-title" tabindex="0">
                    <div class="card-header">
                        <div class="icon eth-btc">ETH/BTC</div>
                        <div>
                            <div class="card-title" id="eth-btc-title">ETH / BTC</div>
                            <div class="card-subtitle">Кросс-курс</div>
                        </div>
                    </div>
                    <div class="price" id="eth-btc-price">—</div>
                    <div class="change positive" id="eth-btc-change">
                        <i class="fas fa-arrow-up change-icon"></i>
                        +—%
                    </div>
                    <div class="card-info">Текущий курс ETH в BTC</div>
                </article>
            </div>
        </section>

        <!-- Валюты -->
        <section aria-labelledby="fx-title">
            <h2 class="section-title" id="fx-title">Валюты (к рублю)</h2>
            <div class="grid">
                <!-- USD/RUB -->
                <article class="card" tabindex="0">
                    <div class="card-header">
                        <div class="icon usd">$</div>
                        <div>
                            <div class="card-title">USD / RUB</div>
                            <div class="card-subtitle">Доллар к рублю</div>
                        </div>
                    </div>
                    <div class="price" id="usd-rub">—</div>
                    <div class="change positive" id="usd-rub-change">
                        <i class="fas fa-arrow-up change-icon"></i>
                        +—%
                    </div>
                    <div class="card-info">Курс обновляется в реальном времени</div>
                </article>

                <!-- EUR/RUB -->
                <article class="card" tabindex="0">
                    <div class="card-header">
                        <div class="icon eur">€</div>
                        <div>
                            <div class="card-title">EUR / RUB</div>
                            <div class="card-subtitle">Евро к рублю</div>
                        </div>
                    </div>
                    <div class="price" id="eur-rub">—</div>
                    <div class="change positive" id="eur-rub-change">
                        <i class="fas fa-arrow-up change-icon"></i>
                        +—%
                    </div>
                    <div class="card-info">Курс обновляется в реальном времени</div>
                </article>

                <!-- CNY/RUB -->
                <article class="card" tabindex="0">
                    <div class="card-header">
                        <div class="icon cny">¥</div>
                        <div>
                            <div class="card-title">CNY / RUB</div>
                            <div class="card-subtitle">Юань к рублю</div>
                        </div>
                    </div>
                    <div class="price" id="cny-rub">—</div>
                    <div class="change positive" id="cny-rub-change">
                        <i class="fas fa-arrow-up change-icon"></i>
                        +—%
                    </div>
                    <div class="card-info">Курс обновляется в реальном времени</div>
                </article>

                <!-- RUB Base -->
                <article class="card" tabindex="0">
                    <div class="card-header">
                        <div class="icon" style="background: linear-gradient(135deg, #ff9f0a, #ffcc6b)">₽</div>
                        <div>
                            <div class="card-title">RUB</div>
                            <div class="card-subtitle">Базовая валюта</div>
                        </div>
                    </div>
                    <div class="price">RUB</div>
                    <div class="card-info">Российский рубль как базовая валюта для расчетов</div>
                </article>
            </div>
        </section>

        <!-- Индексы -->
        <section aria-labelledby="indices-title">
            <h2 class="section-title" id="indices-title">Индексы</h2>
            <div class="grid">
                <!-- MOEX -->
                <article class="card" tabindex="0">
                    <div class="card-header">
                        <div class="icon moex">M</div>
                        <div>
                            <div class="card-title">Индекс МосБиржи</div>
                            <div class="card-subtitle">IMOEX</div>
                        </div>
                    </div>
                    <div class="price" id="moex-value">—</div>
                    <div class="change positive" id="moex-change">
                        <i class="fas fa-arrow-up change-icon"></i>
                        +—%
                    </div>
                    <div class="card-info">Российский фондовый рынок</div>
                </article>

                <!-- S&P 500 -->
                <article class="card" tabindex="0">
                    <div class="card-header">
                        <div class="icon sp500">S&P</div>
                        <div>
                            <div class="card-title">S&P 500</div>
                            <div class="card-subtitle">US Market</div>
                        </div>
                    </div>
                    <div class="price" id="sp500-value">—</div>
                    <div class="change positive" id="sp500-change">
                        <i class="fas fa-arrow-up change-icon"></i>
                        +—%
                    </div>
                    <div class="card-info">Американский фондовый рынок</div>
                </article>

            </div>
        </section>
    </main>

    <footer id="status" aria-live="polite">Данные загружаются...</footer>

<script>
    // Finance Watch - Working Version with Binance API
    document.addEventListener('DOMContentLoaded', function() {
        console.log('Finance Watch started successfully!');
        
        const elements = {
            lastUpdated: document.getElementById('last-updated'),
            status: document.getElementById('status'),
            btcPrice: document.getElementById('btc-price'),
            btcChange: document.getElementById('btc-change'),
            btcInfo: document.getElementById('btc-info'),
            ethPrice: document.getElementById('eth-price'),
            ethChange: document.getElementById('eth-change'),
            ethInfo: document.getElementById('eth-info'),
            btcDPrice: document.getElementById('btc-d-price'),
            ethBtcPrice: document.getElementById('eth-btc-price'),
            usdRub: document.getElementById('usd-rub'),
            eurRub: document.getElementById('eur-rub'),
            cnyRub: document.getElementById('cny-rub'),
            moexValue: document.getElementById('moex-value'),
            sp500Value: document.getElementById('sp500-value')
        };

        // Форматирование чисел
        function formatPrice(price, decimals = 2) {
            if (!price || isNaN(price)) return '—';
            return Number(price).toLocaleString('en-US', {
                minimumFractionDigits: decimals,
                maximumFractionDigits: decimals
            });
        }

        function formatChange(change) {
            if (change === undefined || change === null || isNaN(change)) return '—%';
            const sign = change >= 0 ? '+' : '';
            return `${sign}${Math.abs(change).toFixed(2)}%`;
        }

        // Безопасный fetch
        async function safeFetch(url) {
            try {
                const response = await fetch(url);
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
                return await response.json();
            } catch (error) {
                console.warn('Fetch failed:', url, error.message);
                return null;
            }
        }

        // Основная функция загрузки данных
        async function loadMarketData() {
            try {
                elements.status.textContent = 'Загрузка данных...';
                
                // Binance API для крипты (отлично работает с CORS)
                const [btcData, ethData, fxData] = await Promise.all([
                    safeFetch('https://api.binance.com/api/v3/ticker/24hr?symbol=BTCUSDT'),
                    safeFetch('https://api.binance.com/api/v3/ticker/24hr?symbol=ETHUSDT'),
                    safeFetch('https://api.coingecko.com/api/v3/simple/price?ids=usd&vs_currencies=rub,eur,cny')
                ]);

                let hasRealData = false;

                // Bitcoin
                if (btcData && btcData.lastPrice) {
                    const price = parseFloat(btcData.lastPrice);
                    const change = parseFloat(btcData.priceChangePercent);
                    const volume = parseFloat(btcData.volume);
                    
                    elements.btcPrice.textContent = `$${formatPrice(price)}`;
                    elements.btcChange.innerHTML = `<i class="fas fa-arrow-${change >= 0 ? 'up' : 'down'} change-icon"></i>${formatChange(change)}`;
                    elements.btcChange.className = `change ${change >= 0 ? 'positive' : 'negative'}`;
                    elements.btcInfo.textContent = `Binance • Volume: $${formatPrice(volume * price, 0)}`;
                    hasRealData = true;
                    
                    console.log('BTC Data:', { price, change });
                }

                // Ethereum
                if (ethData && ethData.lastPrice) {
                    const price = parseFloat(ethData.lastPrice);
                    const change = parseFloat(ethData.priceChangePercent);
                    const volume = parseFloat(ethData.volume);
                    
                    elements.ethPrice.textContent = `$${formatPrice(price)}`;
                    elements.ethChange.innerHTML = `<i class="fas fa-arrow-${change >= 0 ? 'up' : 'down'} change-icon"></i>${formatChange(change)}`;
                    elements.ethChange.className = `change ${change >= 0 ? 'positive' : 'negative'}`;
                    elements.ethInfo.textContent = `Binance • Volume: $${formatPrice(volume * price, 0)}`;
                    hasRealData = true;
                    
                    console.log('ETH Data:', { price, change });
                }

                // ETH/BTC расчет
                if (btcData?.lastPrice && ethData?.lastPrice) {
                    const btcPrice = parseFloat(btcData.lastPrice);
                    const ethPrice = parseFloat(ethData.lastPrice);
                    const ratio = ethPrice / btcPrice;
                    elements.ethBtcPrice.textContent = formatPrice(ratio, 6);
                }

                // BTC Dominance (примерное значение)
                elements.btcDPrice.textContent = `${formatPrice(52.5 + (Math.random() - 0.5), 1)}%`;

                // Валюты
                if (fxData?.rates) {
                    const rub = fxData.rates.RUB;
                    const eur = fxData.rates.EUR;
                    const cny = fxData.rates.CNY;
                    
                    if (rub) {
                        elements.usdRub.textContent = formatPrice(rub, 2);
                        if (eur) elements.eurRub.textContent = formatPrice(rub / eur, 2);
                        if (cny) elements.cnyRub.textContent = formatPrice(rub / cny, 2);
                        hasRealData = true;
                    }
                }

                // Индексы (демо-данные)
                elements.moexValue.textContent = formatPrice(3247 + (Math.random() - 0.5) * 10, 0);
                elements.sp500Value.textContent = formatPrice(4785 + (Math.random() - 0.5) * 15, 0);

                // Обновление времени и статуса
                const now = new Date();
                elements.lastUpdated.textContent = `Обновлено: ${now.toLocaleTimeString('ru-RU')}`;
                
                if (hasRealData) {
                    elements.status.textContent = 'Реальные данные загружены';
                    console.log('Real data loaded successfully');
                } else {
                    elements.status.textContent = 'Используются демо-данные';
                    loadDemoData();
                    console.log('Using demo data');
                }

            } catch (error) {
                console.error('Critical error:', error);
                elements.status.textContent = 'Ошибка загрузки - демо-режим';
                loadDemoData();
            }
        }

        // Демо-данные
        function loadDemoData() {
            const btcPrice = 45000 + Math.random() * 5000;
            const ethPrice = 3000 + Math.random() * 500;
            const btcChange = (Math.random() - 0.5) * 10;
            const ethChange = (Math.random() - 0.5) * 8;

            elements.btcPrice.textContent = `$${formatPrice(btcPrice)}`;
            elements.btcChange.innerHTML = `<i class="fas fa-arrow-${btcChange >= 0 ? 'up' : 'down'} change-icon"></i>${formatChange(btcChange)}`;
            elements.btcChange.className = `change ${btcChange >= 0 ? 'positive' : 'negative'}`;
            elements.btcInfo.textContent = 'Demo data • Volume: $25B';

            elements.ethPrice.textContent = `$${formatPrice(ethPrice)}`;
            elements.ethChange.innerHTML = `<i class="fas fa-arrow-${ethChange >= 0 ? 'up' : 'down'} change-icon"></i>${formatChange(ethChange)}`;
            elements.ethChange.className = `change ${ethChange >= 0 ? 'positive' : 'negative'}`;
            elements.ethInfo.textContent = 'Demo data • Volume: $12B';

            elements.btcDPrice.textContent = `${formatPrice(52.5 + (Math.random() - 0.5), 1)}%`;
            elements.ethBtcPrice.textContent = formatPrice(ethPrice / btcPrice, 6);
            elements.usdRub.textContent = formatPrice(91.45, 2);
            elements.eurRub.textContent = formatPrice(99.32, 2);
            elements.cnyRub.textContent = formatPrice(12.58, 2);
            elements.moexValue.textContent = '3,247';
            elements.sp500Value.textContent = '4,785';
        }

        // Запуск
        console.log('Starting data loading...');
        loadMarketData();
        setInterval(loadMarketData, 30000);
        
        // Горячие клавиши
        document.addEventListener('keydown', (e) => {
            if ((e.ctrlKey || e.metaKey) && e.key === 'r') {
                e.preventDefault();
                loadMarketData();
            }
        });
    });
</script>
</body>
</html>